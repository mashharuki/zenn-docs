---
title: "Hats Protocolã‚’ç†è§£ã™ã‚‹2ï¼ï¼"
emoji: "ğŸ±"
type: "tech"
topics: ["TypeScript", "Solidity", "Blockchain", "Web3", "HatsProtocol"]
published: true
---

![](/images/4fc8bb038497aa/0.png)

## ã¯ã˜ã‚ã«

ã“ã®è¨˜äº‹ã¯ä»¥ä¸‹ã®è¨˜äº‹ã®ç¶šãã«ãªã‚Šã¾ã™ï¼ï¼

https://zenn.dev/mashharuki/articles/4fc8bb038497aa

å‰å›ã¾ã§ Hats Module SDKã®æ¦‚è¦ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã—ãŸã€‚

ä»Šå›ã¯ãã®ç¶šãã§ **Hats Signer Gate SDK** ã€ **Hats Account SDK** ã«ã¤ã„ã¦ã¾ã¨ã‚ãŸè¨˜äº‹ã«ãªã‚Šã¾ã™ï¼ï¼

## Hats Signer Gate SDK

**Hats Signer Gateï¼ˆHSGï¼‰** ã¯ã€ç‰¹å®šã®Hatã‚’ç€ç”¨ã—ã¦ã„ã‚‹ã‚¢ãƒ‰ãƒ¬ã‚¹ã«å¯¾ã—ã¦ãƒãƒ«ãƒã‚·ã‚°ç½²åæ¨©ã‚’ä»˜ä¸ã™ã‚‹ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã§ã™ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³çµ„ç¹”ï¼ˆDAOãªã©ï¼‰ãŒã€å€‹ã€…ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦åˆ¶é™ä»˜ãã®ç½²åæ¨©é™ã¨è²¬ä»»ã‚’å–ã‚Šæ¶ˆã—å¯èƒ½ã«å§”ä»»ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

**Multi Hats Signer Gateï¼ˆMHSGï¼‰** ã¯ã€HSGã®æ”¹è‰¯ç‰ˆã§ã€è¤‡æ•°ã®Hatã‚’æœ‰åŠ¹ãªç½²åè€…Hatã¨ã—ã¦è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã“ã®SDKã¯ã€HSGãŠã‚ˆã³MHSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã€æ“ä½œã™ã‚‹ãŸã‚ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®JavaScriptã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã¨Node.jsã®ä¸¡æ–¹ã§å‹•ä½œã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

Hats Signer Gateã®è©³ç´°ãªæ¦‚è¦ã«ã¤ã„ã¦ã¯ã€ã“ã¡ã‚‰ã‚’ã”è¦§ãã ã•ã„ã€‚

- ### Getting Start

  ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

  ```bash
  yarn add @hatsprotocol/hsg-sdk viem
  ```

  å®Ÿéš›ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã™ã‚‹ã€‚

  ```ts
  import { HatsSignerGateClient } from "@hatsprotocol/hsg-sdk";

  const hatsSignerGateClient = new HatsSignerGateClient({
    publicClient,
    walletClient,
  });
  ```

- ### Creating New Instances

  - **deployHatsSignerGateAndSafe**

    æ–°ã—ã„HSGã¨æ–°ã—ã„Safeã‚’ä½œæˆã—ã€ãã‚Œã‚‰ã‚’ã™ã¹ã¦æ¥ç¶šã—ã¾ã™ã€‚

    ```ts
    /**
     * @param account: Account | Address;  // Viemã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPCã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å ´åˆã¯Addressã€ãã®ä»–ã®ã‚¿ã‚¤ãƒ—ã¯Accountï¼‰
     * @param ownerHatId: bigint;          // HSGã®ã‚ªãƒ¼ãƒŠãƒ¼Hatã®ID
     * @param signersHatId: bigint;        // HSGã®ç½²åè€…Hatã®ID
     * @param minThreshold: bigint;        // HSGã®æœ€å°é–¾å€¤
     * @param targetThreshold: bigint;     // HSGã®ç›®æ¨™é–¾å€¤
     * @param maxSigners: bigint;          // HSGã®æœ€å¤§ç½²åè€…æ•°
     */
    const createHsgResult = await hatsSignerGateClient.deployHatsSignerGateAndSafe(
      {
        account,
        ownerHatId,
        signersHatId,
        minThreshold,
        targetThreshold,
        maxSigners,
      });
    ```

  - **deployHatsSignerGate**

    æ–°ã—ã„HSGã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã€ãã‚Œã‚’æ—¢å­˜ã®Safeã«é–¢é€£ä»˜ã‘ã¾ã™ã€‚æ—¢å­˜ã®Safeã«æ¥ç¶šã™ã‚‹ã«ã¯ã€Safeã®æ‰€æœ‰è€…ãŒãã‚Œã‚’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŠã‚ˆã³ã‚¬ãƒ¼ãƒ‰ã¨ã—ã¦æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚


    :::message
      - HatsSignerGateã¯ä»–ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒæ¥ç¶šã•ã‚Œã¦ã„ã‚‹Safeã«ã¯å–ã‚Šä»˜ã‘ãªã„ã§ãã ã•ã„ã€‚
      
      - HatsSignerGateã¯validSignerCount() >= _maxSignersã®å ´åˆã€ãã®Safeã«å–ã‚Šä»˜ã‘ãªã„ã§ãã ã•ã„ã€‚
    :::

    HatsSignerGateã‚’Safeã«æ¥ç¶šã™ã‚‹å‰ã«ã€canAttachHSGToSafeã‚’å‘¼ã³å‡ºã—ã¦çµæœãŒtrueã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ãã†ã—ãªã„ã¨ã€SafeãŒæ°¸ä¹…ã«ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

    ```ts
    /**
     * @param account: Account | Address;  // Viemã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPCã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å ´åˆã¯Addressã€ãã®ä»–ã®ã‚¿ã‚¤ãƒ—ã¯Accountï¼‰
     * @param ownerHatId: bigint;          // HSGã®ã‚ªãƒ¼ãƒŠãƒ¼Hatã®ID
     * @param signersHatId: bigint;        // HSGã®ç½²åè€…Hatã®ID
     * @param safe: Address;               // ç½²åè€…ãŒå‚åŠ ã™ã‚‹æ—¢å­˜ã®Gnosis Safe
     * @param minThreshold: bigint;        // HSGã®æœ€å°é–¾å€¤
     * @param targetThreshold: bigint;     // HSGã®ç›®æ¨™é–¾å€¤
     * @param maxSigners: bigint;          // HSGã®æœ€å¤§ç½²åè€…æ•°
     */
     const createHsgResult = await hatsSignerGateClient.deployHatsSignerGate(
      {
        account,
        ownerHatId,
        signersHatId,
        safe,
        minThreshold,
        targetThreshold,
        maxSigners,
      });
    ```

  - **deployMultiHatsSignerGateAndSafe**

    æ–°ã—ã„MHSGã¨æ–°ã—ã„Safeã‚’ä½œæˆã—ã€ãã‚Œã‚‰ã‚’ã™ã¹ã¦æ¥ç¶šã—ã¾ã™ã€‚

    ```ts
    /**
     * @param account: Account | Address;  // Viemã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPCã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å ´åˆã¯Addressã€ãã®ä»–ã®ã‚¿ã‚¤ãƒ—ã¯Accountï¼‰
     * @param ownerHatId: bigint;          // MHSGã®ã‚ªãƒ¼ãƒŠãƒ¼Hatã®ID
     * @param signersHatIds: bigint[];     // MHSGã®ç½²åè€…Hatã®IDs
     * @param minThreshold: bigint;        // MHSGã®æœ€å°é–¾å€¤
     * @param targetThreshold: bigint;     // MHSGã®ç›®æ¨™é–¾å€¤
     * @param maxSigners: bigint;          // MHSGã®æœ€å¤§ç½²åè€…æ•°
     */
    const createMhsgResult = await hatsSignerGateClient.deployMultiHatsSignerGateAndSafe(
      {
        account,
        ownerHatId,
        signersHatIds,
        minThreshold,
        targetThreshold,
        maxSigners,
      });
    ```

  - **deployMultiHatsSignerGate**

    æ–°ã—ã„MHSGã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã€ãã‚Œã‚’æ—¢å­˜ã®Safeã«é–¢é€£ä»˜ã‘ã¾ã™ã€‚æ—¢å­˜ã®Safeã«æ¥ç¶šã™ã‚‹ã«ã¯ã€Safeã®æ‰€æœ‰è€…ãŒãã‚Œã‚’ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŠã‚ˆã³ã‚¬ãƒ¼ãƒ‰ã¨ã—ã¦æœ‰åŠ¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

    :::message
      - MultiHatsSignerGateã¯ä»–ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒæ¥ç¶šã•ã‚Œã¦ã„ã‚‹Safeã«ã¯å–ã‚Šä»˜ã‘ãªã„ã§ãã ã•ã„ã€‚

      - MultiHatsSignerGateã¯validSignerCount() >= _maxSignersã®å ´åˆã€ãã®Safeã«å–ã‚Šä»˜ã‘ãªã„ã§ãã ã•ã„ã€‚
    :::

    MultiHatsSignerGateã‚’Safeã«æ¥ç¶šã™ã‚‹å‰ã«ã€canAttachMHSGToSafeã‚’å‘¼ã³å‡ºã—ã¦çµæœãŒtrueã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚ãã†ã—ãªã„ã¨ã€SafeãŒæ°¸ä¹…ã«ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

    ```ts
    /**
     * @param account: Account | Address;  // Viemã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPCã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å ´åˆã¯Addressã€ãã®ä»–ã®ã‚¿ã‚¤ãƒ—ã¯Accountï¼‰
     * @param ownerHatId: bigint;          // MHSGã®ã‚ªãƒ¼ãƒŠãƒ¼Hatã®ID
     * @param signersHatIds: bigint[];     // MHSGã®ç½²åè€…Hatã®IDs
     * @param safe: Address;               // ç½²åè€…ãŒå‚åŠ ã™ã‚‹æ—¢å­˜ã®Gnosis Safe
     * @param minThreshold: bigint;        // MHSGã®æœ€å°é–¾å€¤
     * @param targetThreshold: bigint;     // MHSGã®ç›®æ¨™é–¾å€¤
     * @param maxSigners: bigint;          // MHSGã®æœ€å¤§ç½²åè€…æ•°
     */
    const createMhsgResult = await hatsSignerGateClient.deployMultiHatsSignerGate(
      {
        account,
        ownerHatId,
        signersHatIds,
        safe,
        minThreshold,
        targetThreshold,
        maxSigners,
      });
    ```

- ### Hats Signer Gate SDK

  HSGã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¨å¯¾è©±ã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã§ã™ã€‚

  - #### **Signers Management**

    - **hsgClaimSigner**

      Signeræ¨©é™ã‚’è¦æ±‚ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰

      ```ts
      /**
       * @param {Account | Address} account - Viemã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPCã‚¢ã‚«ã‚¦ãƒ³ãƒˆç”¨ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãã®ä»–ã®ã‚¿ã‚¤ãƒ—ç”¨ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼‰ã€‚
       * @param {Address} hsgInstance - HSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @return {Object} - ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨ãƒãƒƒã‚·ãƒ¥ã€‚
       */
      const claimSignerResult = await hatsSignerGateClient.hsgClaimSigner({
        account,
        hsgInstance,
      });
      ```

    - **hsgIsValidSigner**

      ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒSinersHatã‚’ç€ç”¨ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰

      ```ts
      /**
       * @param {Address} hsgInstance - HSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @param {Address} address - ç¢ºèªã™ã‚‹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @return {boolean} - æœ‰åŠ¹ãªã‚µã‚¤ãƒŠãƒ¼ã§ã‚ã‚Œã°trueã€ãã†ã§ãªã‘ã‚Œã°falseã€‚
       */
      const isValid = await hatsSignerGateClient.hsgIsValidSigner({
        hsgInstance,
        address    
      });
      ```

    - **claimedAndStillValid**

      ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒSigneræ¨©åˆ©ã‚’æ‰€æœ‰ã—ã¦ãŠã‚Šã€ãªãŠã‹ã¤æœ‰åŠ¹ã§ã‚ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰

      ```ts
      /**
       * @param {Address} instance - HSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @param {Address} address - ç¢ºèªã™ã‚‹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @return {boolean} - å®‰å…¨ã®æ‰€æœ‰è€…ã®1äººã§ã‚ã‚Šã€ã‹ã¤æœ‰åŠ¹ãªå ´åˆã¯trueã€ãã‚Œä»¥å¤–ã¯falseã€‚
       */
      const claimedAndValid = await hatsSignerGateClient.claimedAndStillValid({
        instance,
        address    
      });
      ```

    - **validSignerCount**

      Signer'sHatã‚’ç€ç”¨ã—ã¦ã„ã‚‹æœ‰åŠ¹ãªSafeã‚ªãƒ¼ãƒŠãƒ¼ã®æ•°ã‚’é›†è¨ˆã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Address} instance - HSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @return {bigint} - Safeã«ãŠã‘ã‚‹æœ‰åŠ¹ãªã‚µã‚¤ãƒŠãƒ¼ã®æ•°ã€‚
       */
      const count = await hatsSignerGateClient.validSignerCount({
        instance 
      });
      ```

    - **reconcileSignerCount**

      Signer'sHatã‚’ç€ç”¨ã—ã¦ã„ã‚‹æœ‰åŠ¹ãªSafeã‚ªãƒ¼ãƒŠãƒ¼ã®æ•°ã‚’é›†è¨ˆã—ã€å¿…è¦ã«å¿œã˜ã¦Safeã®é–¾å€¤ã‚’æ›´æ–°ã—ã¾ã™ã€‚ãŸã ã—ã€ç„¡åŠ¹ãªSafeã‚ªãƒ¼ãƒŠãƒ¼ã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

      ```ts
      /**
       * @param {Account | Address} account - Viemã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPCã‚¢ã‚«ã‚¦ãƒ³ãƒˆç”¨ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãã®ä»–ã®ã‚¿ã‚¤ãƒ—ç”¨ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼‰ã€‚
       * @param {Address} instance - HSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @return {Object} - ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨ãƒãƒƒã‚·ãƒ¥ã€‚
       */
      const res = await hatsSignerGateClient.reconcileSignerCount({
        account,
        instance,
      });
      ```

    - **removeSigner**

      ç„¡åŠ¹ãªSignerã‚’Safeã‹ã‚‰å‰Šé™¤ã—ã€é©åˆ‡ã«é–¾å€¤ã‚’æ›´æ–°ã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Account | Address} account - Viemã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPCã‚¢ã‚«ã‚¦ãƒ³ãƒˆç”¨ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãã®ä»–ã®ã‚¿ã‚¤ãƒ—ç”¨ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼‰ã€‚
       * @param {Address} instance - HSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @param {Address} signer - ç„¡åŠ¹ãªå ´åˆã«å‰Šé™¤ã™ã‚‹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @return {Object} - ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨ãƒãƒƒã‚·ãƒ¥ã€‚
       */
      const res = await hatsSignerGateClient.removeSigner({
        account,
        instance,
        signer,
      });
      ```

  - #### HSG Instance Properties

    - **hsgSignersHatId**

      HSGã®Signer's Hat IDã‚’å–å¾—ã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Address} hsgInstance - HSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @return {bigint} - HSGã®ã‚µã‚¤ãƒŠãƒ¼ã‚ºãƒãƒƒãƒˆIDã€‚
       */
      const signersHat = await hatsSignerGateClient.hsgSignersHatId({
        hsgInstance 
      });
      ```

    - **getSafe**

      HSGã«ã‚¢ã‚¿ãƒƒãƒã•ã‚ŒãŸSafeã‚’å–å¾—ã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Address} instance - HSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @return {Address} - ã‚¢ã‚¿ãƒƒãƒã•ã‚ŒãŸSafeã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       */
      const safe = await hatsSignerGateClient.getSafe({
        instance 
      });
      ```

    - **getMinThreshold**

      HSGã®æœ€å°é–¾å€¤ã‚’å–å¾—ã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Address} instance - HSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @return {bigint} - ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®æœ€å°é–¾å€¤ã€‚
       */
      const minThreshold = await hatsSignerGateClient.getMinThreshold({
        instance 
      });
      ```

    - **getTargetThreshold**

      HSGã®ç›®æ¨™é–¾å€¤ã‚’å–å¾—ã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Address} instance - HSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @return {bigint} - ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ç›®æ¨™é–¾å€¤ã€‚
       */
      const targetThreshold = await hatsSignerGateClient.getTargetThreshold({
        instance 
      });
      ```

    - **getMaxSigners**

      HSGã®æœ€å¤§Signersæ•°ã‚’å–å¾—ã—ã¾ã™ã€‚
      
      ```ts
      /**
       * @param {Address} instance - HSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @return {bigint} - ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®æœ€å¤§ã‚µã‚¤ãƒŠãƒ¼æ•°ã€‚
       */
      const maxSigners = await hatsSignerGateClient.getMaxSigners({
        instance 
      });
      ```

    - **getOwnerHat**

      HSGã®owner Hatã‚’å–å¾—ã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Address} instance - HSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @return {bigint} - ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚ªãƒ¼ãƒŠãƒ¼ãƒãƒƒãƒˆã€‚
       */
      const ownerHat = await hatsSignerGateClient.getOwnerHat({
        instance 
      });
      ```

- ### Multi Hats Signer Gate

  MHSGã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ“ä½œã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰

  - #### Signers Management

    - **mhsgClaimSigner**

      ç½²åè€…ã®æ¨©åˆ©ã‚’Safeã§è¦æ±‚ã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Account | Address} account - Viemã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPCã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å ´åˆã¯Addressã€ãã‚Œä»¥å¤–ã®å ´åˆã¯Accountï¼‰ã€‚
       * @param {Address} mhsgInstance - MHSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @param {bigint} hatId - ç½²åè€…ã®æ¨©åˆ©ã‚’ä¸»å¼µã™ã‚‹ãŸã‚ã®Hat IDã€‚ã“ã‚Œã¯æœ‰åŠ¹ãªSigners Hatã§ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚
       */
      const claimSignerResult = await hatsSignerGateClient.mhsgClaimSigner({
        account,
        mhsgInstance,
        hatId,
      });
      ```

    - **mhsgIsValidSigner**

      ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒSigners Hatã‚’ç€ç”¨ã—ã€ç½²åè€…ã®æ¨©åˆ©ã‚’ä¸»å¼µã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Address} mhsgInstance - MHSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @param {Address} address - ç¢ºèªã™ã‚‹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       */
      const isValid = await hatsSignerGateClient.mhsgIsValidSigner({
          mhsgInstance,
          address    
      });
      ```

    - **claimedAndStillValid**

      ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒç½²åè€…ã®æ¨©åˆ©ã‚’ä¸»å¼µã—ã¦ãŠã‚Šã€ã¾ã æœ‰åŠ¹ã§ã‚ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Address} instance - HSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @param {Address} address - ç¢ºèªã™ã‚‹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       */
      const claimedAndValid = await hatsSignerGateClient.claimedAndStillValid({
        instance,
        address    
      });
      ```

    - **validSignerCount**

      Signers Hatã‚’ç€ç”¨ã—ã¦ã„ã‚‹æœ‰åŠ¹ãªSafeã®æ‰€æœ‰è€…ã®æ•°ã‚’æ•°ãˆã¾ã™ã€‚

      ```ts
      /**
       * @param {Address} instance - MHSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       */
      const count = await hatsSignerGateClient.validSignerCount({
          instance 
      });
      ```

    - **reconcileSignerCount**

      Signers Hatã‚’ç€ç”¨ã—ã¦ã„ã‚‹Safeã®æ‰€æœ‰è€…ã®æ•°ã‚’æ•°ãˆã€å¿…è¦ã«å¿œã˜ã¦Safeã®é–¾å€¤ã‚’æ›´æ–°ã—ã¾ã™ã€‚ãŸã ã—ã€ç„¡åŠ¹ãªSafeã®æ‰€æœ‰è€…ã¯å‰Šé™¤ã—ã¾ã›ã‚“ã€‚

      ```ts
      /**
       * @param {Account | Address} account - Viemã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPCã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å ´åˆã¯Addressã€ãã‚Œä»¥å¤–ã®å ´åˆã¯Accountï¼‰ã€‚
       * @param {Address} instance - MHSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       */
      const res = await hatsSignerGateClient.reconcileSignerCount({
          account,
          instance,
      });
      ```

    - **removeSigner**

      ç„¡åŠ¹ãªç½²åè€…ã‚’Safeã‹ã‚‰å‰Šé™¤ã—ã€é©å®œé–¾å€¤ã‚’æ›´æ–°ã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Account | Address} account - Viemã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPCã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å ´åˆã¯Addressã€ãã‚Œä»¥å¤–ã®å ´åˆã¯Accountï¼‰ã€‚
       * @param {Address} instance - MHSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @param {Address} signer - ç„¡åŠ¹ãªç½²åè€…ã®å ´åˆã«å‰Šé™¤ã™ã‚‹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       */
      const res = await hatsSignerGateClient.removeSigner({
          account,
          instance,
          signer,
      });
      ```

  - #### MHSG Instance Properties

    MHSGã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®åŸºæœ¬çš„ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å–å¾—ã—ã¾ã™ã€‚

    - **mhsgIsValidSignersHat**

      æŒ‡å®šã•ã‚ŒãŸHatãŒæœ‰åŠ¹ãªSigners Hatã§ã‚ã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Address} mhsgInstance - MHSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @param {bigint} hatId - ç¢ºèªã™ã‚‹Hat IDã€‚
       */
      const isValid = await hatsSignerGateClient.mhsgIsValidSignersHat({
          mhsgInstance,
          hatId    
      });
      ```

    - **getSafe**

      MHSGã«é–¢é€£ä»˜ã‘ã‚‰ã‚ŒãŸSafeã‚’å–å¾—ã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Address} instance - MHSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       */
      const safe = await hatsSignerGateClient.getSafe({
          instance 
      });
      ```

    - **getMinThreshold**

      MHSGã®æœ€å°é–¾å€¤ã‚’å–å¾—ã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Address} instance - MHSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       */
      const minThreshold = await hatsSignerGateClient.getMinThresholde({
          instance 
      });
      ```

    - **getTargetThreshold**

      MHSGã®ç›®æ¨™é–¾å€¤ã‚’å–å¾—ã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Address} instance - MHSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       */
      const targetThreshold = await hatsSignerGateClient.getTargetThreshold({
          instance 
      });
      ```

    - **getMaxSigners**

      ```ts
      /**
       * @param {Address} instance - MHSGã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       */
      const maxSigners = await hatsSignerGateClient.getMaxSigners({
          instance 
      });
      ```

    - **getOwnerHat**

      ```ts
      /**
       * @return {bigint} - ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®æœ€å¤§ç½²åè€…æ•°ã€‚
       */
      const ownerHat = await hatsSignerGateClient.getOwnerHat({
          instance 
      });
      ```

  - #### HSG Owner

    MHSGã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®Owner Hatã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã®ã¿ãŒå®Ÿè¡Œã§ãã‚‹ãƒ¡ã‚½ãƒƒãƒ‰

    - **mhsgAddSignerHats**

      æ–°ã—ã„æ‰¿èªæ¸ˆã¿Signers Hatsã‚’è¿½åŠ ã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Account | Address} account - Viemã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPCã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å ´åˆã¯Addressã€ãã®ä»–ã®ã‚¿ã‚¤ãƒ—ã®å ´åˆã¯Accountï¼‰ã€‚
       * @param {Address} mhsgInstance - MHSGã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @param {bigint[]} newSignerHats - æ‰¿èªæ¸ˆã¿ã®Signers Hatsã¨ã—ã¦è¿½åŠ ã™ã‚‹Hat IDã®é…åˆ—ã€‚
       * @return {{ status: "success" | "reverted", transactionHash: `0x${string}` }} - å–å¼•ãŒæˆåŠŸã—ãŸå ´åˆã¯"success"ã€å–å¼•ãŒãƒªãƒãƒ¼ãƒˆã•ã‚ŒãŸå ´åˆã¯"reverted"ã‚’è¿”ã—ã¾ã™ã€‚transactionHashã¯å–å¼•ã®ãƒãƒƒã‚·ãƒ¥ã§ã™ã€‚
       */
      const res = await hatsSignerGateClient.mhsgAddSignerHats({
          account,
          mhsgInstance,
          newSignerHats,
      });
      ```

    - **setTargetThreshold**

      æ–°ã—ã„ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã—ãã„å€¤ã‚’è¨­å®šã—ã€é©åˆ‡ãªå ´åˆã«ã¯Safeã®ã—ãã„å€¤ã‚’å¤‰æ›´ã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Account | Address} account - Viemã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPCã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å ´åˆã¯Addressã€ãã®ä»–ã®ã‚¿ã‚¤ãƒ—ã®å ´åˆã¯Accountï¼‰ã€‚
       * @param {Address} instance - HSGã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @param {bigint} targetThreshold - è¨­å®šã™ã‚‹æ–°ã—ã„ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã—ãã„å€¤ã€‚
       * @return {{ status: "success" | "reverted", transactionHash: `0x${string}` }} - å–å¼•ãŒæˆåŠŸã—ãŸå ´åˆã¯"success"ã€å–å¼•ãŒãƒªãƒãƒ¼ãƒˆã•ã‚ŒãŸå ´åˆã¯"reverted"ã‚’è¿”ã—ã¾ã™ã€‚transactionHashã¯å–å¼•ã®ãƒãƒƒã‚·ãƒ¥ã§ã™ã€‚
       */
      const res = await hatsSignerGateClient.setTargetThreshold({
          account,
          instance,
          targetThreshold,
      });
      ```

    - **setMinThreshold**

      æ–°ã—ã„æœ€å°ã—ãã„å€¤ã‚’è¨­å®šã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Account | Address} account - Viemã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPCã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å ´åˆã¯Addressã€ãã®ä»–ã®ã‚¿ã‚¤ãƒ—ã®å ´åˆã¯Accountï¼‰ã€‚
       * @param {Address} instance - HSGã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @param {bigint} minThreshold - è¨­å®šã™ã‚‹æ–°ã—ã„æœ€å°ã—ãã„å€¤ã€‚
       * @return {{ status: "success" | "reverted", transactionHash: `0x${string}` }} - å–å¼•ãŒæˆåŠŸã—ãŸå ´åˆã¯"success"ã€å–å¼•ãŒãƒªãƒãƒ¼ãƒˆã•ã‚ŒãŸå ´åˆã¯"reverted"ã‚’è¿”ã—ã¾ã™ã€‚transactionHashã¯å–å¼•ã®ãƒãƒƒã‚·ãƒ¥ã§ã™ã€‚
       */
      const res = await hatsSignerGateClient.setMinThreshold({
          account,
          instance,
          minThreshold,
      });
      ```   

    - **setOwnerHat**

      æ–°ã—ã„Owner Hatã‚’è¨­å®šã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Account | Address} account - Viemã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPCã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å ´åˆã¯Addressã€ãã®ä»–ã®ã‚¿ã‚¤ãƒ—ã®å ´åˆã¯Accountï¼‰ã€‚
       * @param {Address} instance - MHSGã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @param {bigint} newOwnerHat - è¨­å®šã™ã‚‹æ–°ã—ã„Owner Hatã€‚
       * @param {Address} hatsContractAddress - æ–°ã—ã„Owner Hatã®Hats.solã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @return {{ status: "success" | "reverted", transactionHash: `0x${string}` }} - å–å¼•ãŒæˆåŠŸã—ãŸå ´åˆã¯"success"ã€å–å¼•ãŒãƒªãƒãƒ¼ãƒˆã•ã‚ŒãŸå ´åˆã¯"reverted"ã‚’è¿”ã—ã¾ã™ã€‚transactionHashã¯å–å¼•ã®ãƒãƒƒã‚·ãƒ¥ã§ã™ã€‚
       */
      const res = await hatsSignerGateClient.setOwnerHat({
          account,
          instance,
          newOwnerHat,
          hatsContractAddress,
      });
      ```

- ### MHSG & MHSG Handlers

  SDKã«ã¯HSGãŠã‚ˆã³MHSGã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®æ›¸ãè¾¼ã¿æ“ä½œã‚’å‘¼ã³å‡ºã™ãŸã‚ã®å˜ä¸€ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚‚å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€HSG/MHSGã®ã‚„ã‚Šå–ã‚Šã‚’ã€Hats Modulesã¨ã®ã‚„ã‚Šå–ã‚Šã¨åŒæ§˜ã«ã€HSGãŠã‚ˆã³MHSGã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨å˜ä¸€ã®æ›¸ãè¾¼ã¿é–¢æ•°ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ä½¿ç”¨ã—ã¦å‡¦ç†ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

  - #### **Handlers**

    - **callInstanceWriteFunction**

      HSG/MHSGã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®æ›¸ãè¾¼ã¿é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Account | Address} account - Viemã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPCã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å ´åˆã¯Addressã€ãã®ä»–ã®ã‚¿ã‚¤ãƒ—ã®å ´åˆã¯Accountï¼‰ã€‚
       * @param {HsgType} type - 'HSG' ã¾ãŸã¯ 'MHSG'ã€‚
       * @param {Address} instance - MHSG/HSGã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @param {WriteFunction} func - å‘¼ã³å‡ºã™æ›¸ãè¾¼ã¿é–¢æ•°ã€‚WriteFunctionå‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦æä¾›ã•ã‚Œã¾ã™ã€‚
       * @param {unknown[]} args - é–¢æ•°ã‚’å‘¼ã³å‡ºã™ãŸã‚ã®å¼•æ•°ã€‚WriteFunctionArgå‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦æä¾›ã•ã‚Œã¾ã™ã€‚
       * @return {{ status: "success" | "reverted", transactionHash: `0x${string}` }} - å–å¼•ãŒæˆåŠŸã—ãŸå ´åˆã¯"success"ã€å–å¼•ãŒãƒªãƒãƒ¼ãƒˆã•ã‚ŒãŸå ´åˆã¯"reverted"ã‚’è¿”ã—ã¾ã™ã€‚transactionHashã¯å–å¼•ã®ãƒãƒƒã‚·ãƒ¥ã§ã™ã€‚
       */
      const res = await hatsSignerGateClient.callInstanceWriteFunction({
          account,
          type,
          instance,
          func,
          args,
      });
      ```

    - **getInstanceParameters**

      HSGã¾ãŸã¯MHSGã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ãƒ©ã‚¤ãƒ–ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {Address} instance - ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
       * @return {{ label: string, value: unknown, solidityType: string, displayType: string }[]} - å„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æƒ…å ±ã‚’å«ã‚€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é…åˆ—ã€‚labelã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®åå‰ã‚„èª¬æ˜ã€valueã¯ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‹ã‚‰è¿”ã•ã‚ŒãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å€¤ã€solidityTypeã¯ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®Solidityå‹ã€displayTypeã¯UIã§é©åˆ‡ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ãŸã‚ã®ã‚¿ã‚¤ãƒ—ã§ã™ã€‚
       */
      const params = await hatsSignerGateClient.getInstanceParameters(instance);
      ```

  - #### **Metadata**

    HSGãŠã‚ˆã³MHSGã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€ãã‚Œãã‚Œã®ABIã€æ›¸ãè¾¼ã¿é–¢æ•°ã€ãŠã‚ˆã³å„é–¢æ•°ã«é–¢é€£ã™ã‚‹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚„ã‚«ã‚¹ã‚¿ãƒ ãƒ­ãƒ¼ãƒ«ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

    - **getMetadata**

      HSGã¾ãŸã¯MHSGã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å–å¾—ã—ã¾ã™ã€‚

      ```ts
      /**
       * @param {HsgType} type - "HSG" ã¾ãŸã¯ "MHSG"ã€‚
       * @return {HsgMetadata} - HsgMetadataå‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
       */
      const metadata = await hatsSignerGateClient.getMetadata(type);
      ```

  - #### **Type**

    - **HsgMetadata**

      HSGã¾ãŸã¯MHSGã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¡¨ã—ã¾ã™ã€‚

      ```ts
      {
        customRoles: Role[]; // HSG/MHSGã‚«ã‚¹ã‚¿ãƒ ãƒ­ãƒ¼ãƒ«
        writeFunctions: WriteFunction[]; // HSG/MHSGæ›¸ãè¾¼ã¿é–¢æ•°
        abi: Abi; // HSG/MHSG ABI
      }
      ```

    - **Role**

      ã‚«ã‚¹ã‚¿ãƒ HSG/MHSGãƒ­ãƒ¼ãƒ«ã€‚å„ãƒ­ãƒ¼ãƒ«ã«ã¯å¸½å­ãŒé–¢é€£ä»˜ã‘ã‚‰ã‚Œã¦ãŠã‚Šã€ãã®å¸½å­ã®ç€ç”¨è€…ãŒã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®ç‰¹å®šã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™æ¨©é™ã‚’æŒã¡ã¾ã™ã€‚

      ```ts
      {
        id: string; // ãƒ­ãƒ¼ãƒ«ã®ID
        name: string; // ãƒ­ãƒ¼ãƒ«ã®åå‰
        criteria: string; // ãƒ­ãƒ¼ãƒ«ã®å¸½å­ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆé–¢æ•°ã®åå‰
        hatAdminsFallback?: boolean; // 'true' ã®å ´åˆã€ãƒ­ãƒ¼ãƒ«ã®criteriaé–¢æ•°ãŒã‚¼ãƒ­ã‚’è¿”ã™ã¨ãã€ãã®ãƒ­ãƒ¼ãƒ«ã¯ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå¸½å­ã®ç®¡ç†è€…ã«ä»˜ä¸ã•ã‚Œã¾ã™ã€‚
      }
      ```

    - **WriteFunction**

      HSG/MHSGæ›¸ãè¾¼ã¿é–¢æ•°ã€‚å„æ›¸ãè¾¼ã¿é–¢æ•°ã¯ã€ãƒ­ãƒ¼ãƒ«ã®ç€ç”¨è€…ãŒã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™æ¨©é™ã‚’æŒã¤ãƒ­ãƒ¼ãƒ«ã«é–¢é€£ä»˜ã‘ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚

      ```ts
      {
        roles: string[]; // é–¢æ•°ã‚’å‘¼ã³å‡ºã™æ¨©é™ã‚’æŒã¤ãƒ­ãƒ¼ãƒ«ã®ID
        functionName: string; // ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆå†…ã®é–¢æ•°å
        label: string; // ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¡¨ç¤ºã™ã‚‹é–¢æ•°å
        description: string; // ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¡¨ç¤ºã™ã‚‹é–¢æ•°ã®èª¬æ˜
        primary?: boolean; // 'true' ã®å ´åˆã€ã“ã®é–¢æ•°ã¯é–¢é€£ã™ã‚‹ãƒ­ãƒ¼ãƒ«ã®ä¸»è¦é–¢æ•°ã§ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯ã€ã“ã®æƒ…å ±ã‚’ä½¿ç”¨ã—ã¦å„ãƒ­ãƒ¼ãƒ«ã®é–¢æ•°ã‚’ã‚ˆã‚Šç›®ç«‹ãŸã›ã¦è¡¨ç¤ºã§ãã¾ã™ã€‚
        args: WriteFunctionArg[]; // é–¢æ•°ã®å¼•æ•°
      }
      ```

    - **WriteFunctionArg**

      HSG/MHSGæ›¸ãè¾¼ã¿é–¢æ•°ã®å¼•æ•°ã€‚

      ```ts
      {
        name: string; // å¼•æ•°ã®åå‰
        description: string; // å¼•æ•°ã®èª¬æ˜
        type: string; // å¼•æ•°ã®Solidityå‹ã€ä¾‹ï¼š'uint256'
        displayType: string; // å¼•æ•°ã«é©ã—ãŸUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
        optional?: boolean; // 'true' ã«è¨­å®šã™ã‚‹ã¨ã€ã“ã®å…¥åŠ›ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚
      }
      ```

## Hats Account SDK

**HatsAccount**ã¯ã€Hats Protocolã®å„ãƒãƒƒãƒˆã«ã‚¹ãƒãƒ¼ãƒˆã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æä¾›ã—ã¾ã™ã€‚

å„ãƒãƒƒãƒˆã«ã¯ã€**ERC6551**è¦æ ¼ã«æº–æ‹ ã—ã€ERC6551Registryãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼ã‚’ä»‹ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹è¤‡æ•°ã®HatsAccountã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãŒå­˜åœ¨ã—ã¾ã™ã€‚

HatsAccountã«ã‚ˆã‚Šã€å„ãƒãƒƒãƒˆã¯ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’æŒã¤ã“ã¨ãŒã§ãã¾ã™:

- ETHã€ERC20ã€ERC721ã€ERC1155ãƒˆãƒ¼ã‚¯ãƒ³ã®é€ä¿¡
- ãƒãƒ«ãƒã‚·ã‚°ã®ç½²åè€…ã¨ã—ã¦ã€ERC1271äº’æ›ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ç½²å
- DAOã®ãƒ¡ãƒ³ãƒãƒ¼ã«ãªã‚Šã€ææ¡ˆã‚’è¡Œã£ãŸã‚Šã€æŠ•ç¥¨ã—ãŸã‚Šã™ã‚‹ï¼ˆä¾‹ï¼šMoloch DAOï¼‰
- ä»–ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™
- okenboundã®ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹ã‚³ãƒ³ã‚»ãƒ—ãƒˆã‚’åˆ©ç”¨ã—ã¦ã€ä»–ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¯ãƒˆã«`Delegatecall`
- ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ™ãƒ¼ã‚¹ã®ã‚ªãƒ³ãƒã‚§ãƒ¼ãƒ³ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚¹ã‚­ãƒ¼ãƒ ã«ãŠã‘ã‚‹æ¨©é™ã®ä»˜ä¸

æœ€åˆã¨æœ€å¾Œã‚’é™¤ãã“ã‚Œã‚‰ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ã™ã¹ã¦ã€ãƒãƒƒãƒˆã®ç€ç”¨è€…ã«ã‚ˆã£ã¦è¡Œã‚ã‚Œã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¢ãƒ‡ãƒ«ã¯HatsAccountã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦æ±ºã¾ã‚Šã¾ã™ã€‚

ã“ã®SDKã¯ã€Hats Accountã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆã‚„æ“ä½œã‚’è¡Œã†ãŸã‚ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®JavaScriptã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã‚ã‚Šã€ãƒ–ãƒ©ã‚¦ã‚¶ã¨Node.jsã®ä¸¡æ–¹ã§å‹•ä½œã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

### 1 of N Hats Account

HatsAccount1ofN ã¯ã€å…¸å‹çš„ãª1-of-nã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¢ãƒ‡ãƒ«ã‚’åæ˜ ã—ãŸHatsAccountã®ä¸€ã¤ã§ã™ã€‚

ã“ã®ãƒ¢ãƒ‡ãƒ«ã§ã¯ã€HatsAccount1ofNã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å¸½å­ã‚’ã‹ã¶ã‚‹ã©ã®å€‹äººã§ã‚‚ã€ãã®HatsAccountã‚’å®Œå…¨ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚è¤‡æ•°ã®å€‹äººãŒåŒã˜å¸½å­ã‚’ã‹ã¶ã£ã¦ã„ã‚‹å ´åˆã€ãã‚Œãã‚ŒãŒç‹¬ç«‹ã—ã¦å®Œå…¨ãªã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«æ¨©ã‚’æŒã¡ã¾ã™ã€‚

HatsProtocolç‰ˆã®ãƒãƒ«ãƒã‚·ã‚°ã£ã¦æ„Ÿã˜ã§ã™ã‹ã­ã€‚

- #### Getting Started

  Hats Account SDKã‚’ä½¿ã†æ™‚ã¯ã¾ãšä»¥ä¸‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

  ```bash
  yarn add @hatsprotocol/hats-account-sdk viem
  ```

  ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ç”Ÿæˆã™ã‚Œã°è‰¯ã„ã¿ãŸã„ã§ã™ï¼ï¼

  ã“ã‚Œã¾ã§ã®SDKã¨åŒã˜ã§ã™ã­ï¼

  ```ts
  import { HatsAccount1ofNClient } from "@hatsprotocol/hats-account-sdk";

  const hatsAccount1ofNClient = new HatsAccount1ofNClient({
      publicClient,
      walletClient,
  });
  ```

- #### Creating New Instances

  - **createAccount**

    1 of N Hats Account ã®æ–°ã—ã„ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚

    ```ts
    /**
     * @param {Account | Address} account - Viem ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPC ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å ´åˆã¯ Addressã€ãã‚Œä»¥å¤–ã®ã‚¿ã‚¤ãƒ—ã®å ´åˆã¯ Accountï¼‰ã€‚
     * @param {bigint} hatId - ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹å¯¾è±¡ã®å¸½å­IDã€‚
     * @param {bigint} salt - ä»»æ„ã®æ•°å€¤ï¼ˆ"ã‚½ãƒ«ãƒˆ"ã¨ã—ã¦ä½¿ç”¨ï¼‰ã€‚
     * @return {Object} - ä½œæˆçµæœã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
     */
    const createHatsAccountResult = await hatsAccount1ofNClient.createAccount({
        account,
        hatId,
        salt,
    });
    ```

  - **predictAccountAddress**

    1 of N Hats Account ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’äºˆæ¸¬ã—ã¾ã™ã€‚

    ```ts
    /**
     * @param {bigint} hatId - ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹å¯¾è±¡ã®å¸½å­IDã€‚
     * @param {bigint} salt - ä»»æ„ã®æ•°å€¤ï¼ˆ"ã‚½ãƒ«ãƒˆ"ã¨ã—ã¦ä½¿ç”¨ï¼‰ã€‚
     * @return {string} - äºˆæ¸¬ã•ã‚Œã‚‹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
     */
    const predictedAccount = await hatsAccount1ofNClient.predictAccountAddress({
        hatId,
        salt,
    });
    ```

- #### Executing From An Instance

  Hats Account ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‹ã‚‰æ“ä½œã‚’å®Ÿè¡Œã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®é–¢æ•°ã‚’å‘¼ã³å‡ºã›ã‚‹ã®ã¯ã€ãã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®å¸½å­ã‚’æŒã¤ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ã§ã™ã€‚

  - **execute**

    ```ts
    /**
     * @param {Account | Address} account - Viem ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPC ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å ´åˆã¯ Addressã€ãã‚Œä»¥å¤–ã®ã‚¿ã‚¤ãƒ—ã®å ´åˆã¯ Accountï¼‰ã€‚
     * @param {Address} instance - Hats Account ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
     * @param {Operation} operation - æ“ä½œã®å®Ÿè¡Œãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ Operation ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
     * @return {Object} - å®Ÿè¡Œçµæœã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
     */
    const executionResult = await hatsAccount1ofNClient.execute({
        account,
        instance,
        operation,
    });
    ```

  - **executeBatch**

    ä¸€é€£ã®æ“ä½œã‚’ä¸€æ‹¬ã§å®Ÿè¡Œã—ã¾ã™ã€‚

    ```ts
    /**
     * @param {Account | Address} account - Viem ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆJSON-RPC ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å ´åˆã¯ Addressã€ãã‚Œä»¥å¤–ã®ã‚¿ã‚¤ãƒ—ã®å ´åˆã¯ Accountï¼‰ã€‚
     * @param {Address} instance - Hats Account ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚
     * @param {Operation[]} operations - å„æ“ä½œã®å®Ÿè¡Œãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ Operation ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é…åˆ—ã€‚
     * @return {Object} - å®Ÿè¡Œçµæœã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
     */
    const executionResult = await hatsAccount1ofNClient.executeBatch({
        account,
        instance,
        operations,
    });
    ```

- #### Type

  - **Operation**

    Hats Account ã®æ“ä½œã«é–¢ã™ã‚‹å®Ÿè¡Œãƒ‡ãƒ¼ã‚¿ã€‚

    ```ts
    {
      to: Address; // æ“ä½œã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹
      value: bigint; // ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«é€ä¿¡ã•ã‚Œã‚‹Etherã®å€¤
      data: Hex; // ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæ“ä½œã®ã‚³ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿
      operation: OperationType; // å®Ÿè¡Œã™ã‚‹æ“ä½œã®ç¨®é¡ã‚’ç¤ºã™ OperationType ã®å€¤
    }
    ```

  - **OperationType**

    å®Ÿè¡Œã™ã‚‹æ“ä½œã‚’ç¤ºã™åˆ—æŒ™å‹ã€‚

    ```ts
    {
      Call,         // é€šå¸¸ã®ã‚³ãƒ¼ãƒ«æ“ä½œ
      DelegateCall, // ãƒ‡ãƒªã‚²ãƒ¼ãƒˆã‚³ãƒ¼ãƒ«æ“ä½œ
    }
    ```

  - **CreateAccountResult**

    ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆã®çµæœã€‚

    ```ts
    {
      status: "success" | "reverted"; // æˆåŠŸã—ãŸå ´åˆã¯ "success"ã€å¤±æ•—ã—ãŸå ´åˆã¯ "reverted"
      transactionHash: Address; // ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒãƒƒã‚·ãƒ¥å€¤
      newAccount: Address; // æ–°ã—ãä½œæˆã•ã‚ŒãŸã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ã‚¢ãƒ‰ãƒ¬ã‚¹
    }
    ```

  - **ExecutionResult**

    Hats Account ã®å®Ÿè¡Œçµæœã€‚

    ```ts
    {
      status: "success" | "reverted"; // æˆåŠŸã—ãŸå ´åˆã¯ "success"ã€å¤±æ•—ã—ãŸå ´åˆã¯ "reverted"
      transactionHash: Address; // ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒãƒƒã‚·ãƒ¥å€¤
    }
    ```

ä»Šå›ã¯ã“ã“ã¾ã§ã«ãªã‚Šã¾ã™ï¼ï¼

èª­ã‚“ã§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼ï¼